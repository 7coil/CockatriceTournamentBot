<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Marchesa Cockatrice Bot API Documentation</title>
<style>
.grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr 1fr;
    gap: 0px 0px;
    grid-template-areas:
        "content content content content"
        "content content content content"
        "index index index index";
}

.index {
    grid-area: index; 
    color: white;
    font-family: verdana;
    padding: 32px;
}

.index-inner {
    padding: 10px;
    position: -webkit-sticky;
    position: sticky;
    top: 0;
}

@Media (min-width: 500px) and (orientation: landscape) {
    .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        grid-template-rows: 1fr 1fr 1fr;                
        gap: 0px 0px;
        grid-template-areas:
            "index content content ."
            "index content content ."
            "index content content .";
    }
}

.content {
    grid-area: content;
    background-color: rgb(30, 30, 30);
    color: white;
    font-family: verdana;
    padding: 32px;
}

.content-inner {
    margin-bottom: 32px;
    margin-left: 32px;
    margin-right: 32px;
    margin-top: 32px;
}

.bg {
    margin-bottom: 0px;
    margin-left: 0px;
    margin-right: 0px;
    margin-top: 0px;
    background-color: rgb(10, 100, 100);
}

blockquote {
    padding-left: 10px;
    background-color: rgb(35, 35, 35);
    color: rgb(240, 240, 240);
    font-family: mono;
}

a {
    color: rgb(221, 216, 0);
    font-family: mono;
}

h1, h2, h3 {
    color: white;
    font-family: sans;
}
</style>
</head>

<body class="bg">
<div class="grid-container">
    <div class="index">
        <div class="index-inner">
            <h2>Index:</h2>
            <!--Index Auto-generated by the python script-->
{INDEX}
        </div>
    </div>
    <div class="content">
        <div class="content-inner">
            <h1>API Documentation</h1>

            <p>This API documentation should be accurate if it is not please visit the
            <a href="/github">github repo</a> and make an issue.</p>

            <p name="top"/>
            <h3 name="../api/">../api/</h3>
            -> Returns this page :)

            <h3 name="../api/version">../api/version</h3>
            -> Request body should be null
            -> Returns the server version i.e:
            <blockquote>
            v1.0
            </blockquote>

            <h3 name="../api/checkauthkey">../api/checkauthkey</h3>
            -> Request body is auth token i.e:

            <blockquote>
            sampleauthtoken
            </blockquote>

            -> Returns 1 if the auth token is valid, 0 if not. i.e:
            <blockquote>
            valid=1
            </blockquote>
            -> If it is valid or
            <blockquote>
            valid=0
            </blockquote>
            -> If it is invalid

            <h3 name="Invalid Auth Tokens">Invalid Auth Tokens</h3>
            -> Any of the below requests that have an invalid auth token will give an error with response code 401 and body of
            <blockquote>
            invalid auth token
            </blockquote>
            
            <h3 name="Invalid Commands">Invalid Commands</h3>
            -> Any invalid command will receive a 404 response.
            <blockquote>
            error 404
            </blockquote>

            <h3 name="../api/creategame">../api/creategame</h3>
            <h4>Creates a game</h4>            
            -> Request body follows this format (case-sensitive):
            <br>
            <blockquote>
            authtoken=token
            <br>
            gamename=name
            <br>
            password=password
            <br>
            playerCount=2/3/...
            <br>
            spectatctorsAllowed=1/0
            <br>
            spectatorsNeedPassword=1/0
            <br>
            spectatorsCanChat=1/0
            <br>
            spectatorsCanSeeHands=1/0
            <br>
            onlyRegistered=1/0
            </blockquote>

            <b>-> The slot for the bot is automatically made so player count should be the amount of human players.</b>
            <br>
            -> All games must have a password.
            <br>
            -> The request parser is case sensitive.
            <br>

            -> Returns the game id if the game is made; or error if it is not made. i.e:
            <blockquote>
            gameid=123456
            replayName=replay-test-3.cor
            </blockquote>
            if it is made or
            <blockquote>
            timeout error
            </blockquote>
            if it is not made

            <h3 name="../api/kickplayer">../api/kickplayer</h3>
            <h4>Kicks a player</h4>
            
            -> Request body should be in this format:
            <blockquote>
            authtoken=token
            <br>
            gameid=id returned by creategame
            <br>
            target=player name
            </blockquote>
            
            -> Response will be success if the bot issued the command.
            <blockquote>
            success
            </blockquote>
            -> If the player is not in the game then a response of error not found will be send
            <blockquote>
            error not found
            </blockquote>
            
            -> Due to cockatrice <b>spaghetti</b> there is no nice-non-<b>spaghetti</b> way for the bot to kick the player and give better output because the CMD ID is ignored by servatrice. Feel free to add this functionality if it is important.
            
            <h3 name="../replay-%s-%d.cor">../replay-%s-%d.cor</h3>
            <h3 name="../${REPLAY_FOLDER}/**/*%s-%d.cor">../${REPLAY_FOLDER}/**/*%s-%d.cor</h3>
            <h4>Downloads a replay or shows an error if the replay does not exist.</h4>
            %d is the game ID as returned by creategame and %s is the game name sent to the api.
            The replay may be overwritten after 
            enough time. Returns the replay file.
            
            If a game name contains one or more slashes then it is stored in a folder within the replay folder and the returned URL from creategame will show where it is stored.

            <p name="bottom"/>

            <h3 name ="Version info"><a href="/api/version">Version info</a> | <a href="/github">
            Github repo</a> | Marchesa Bot by Danny Piper (djpiper28) | Powered by <a href="https://github.com/cesanta/mongoose/">Mongoose</a></h3>

            </p>
        </div>
    </div>    
</div>
</body>
</html>
